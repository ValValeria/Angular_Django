<div class="add-product__content w-100 center">
  <div class="add-product__form shadow p-all w-100 mt">
    <form class="w-100" [formGroup]="formGroup" #form>
      <mat-form-field appearance="outline" class="w-100" color="accent">
        <mat-label>Title</mat-label>
        <input matInput formControlName="title">
      </mat-form-field>
      <mat-form-field appearance="outline" class="w-100" color="accent">
        <mat-label>Price</mat-label>
        <input matInput type="number" formControlName="price">
      </mat-form-field>
      <mat-form-field appearance="outline" class="w-100" color="accent">
        <mat-label>Short description</mat-label>
        <input matInput formControlName="short_description">
      </mat-form-field>
      <mat-form-field appearance="outline" class="w-100" color="accent">
        <mat-label>Long description</mat-label>
        <textarea matInput formControlName="long_description"></textarea>
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-100" color="accent">
        <mat-label>Count</mat-label>
        <input matInput type="number" formControlName="count">
      </mat-form-field>
      <mat-form-field appearance="outline" class="w-100" color="accent">
        <mat-label>Brand</mat-label>
        <input matInput formControlName="brand">
      </mat-form-field>
      <mat-form-field appearance="outline" class="w-100" color="accent">
        <mat-label>Category</mat-label>
        <input #category type="text" formControlName="category" matInput on-change="addCategory(category.value)"/>
        <div class="mt">
          <mat-chip-list
            class="w-100"
            [multiple]="false"
            [selectable]="true"
          >
            <mat-chip
              color="accent"
              *ngFor="let keyword of categories"
              [value]="keyword"
              (click)="chooseCategory(keyword)"
            >
              {{keyword}}
            </mat-chip>
          </mat-chip-list>
        </div>
      </mat-form-field>
      <mat-form-field appearance="outline" class="w-100" color="accent">
        <mat-label>Status</mat-label>
        <mat-select formControlName="status">
          <mat-option value="limited">Limited</mat-option>
          <mat-option value="unlimited">Unlimited</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field appearance="outline" class="w-100" color="accent">
        <mat-label>Rating</mat-label>
        <input matInput min="1" max="5" name="rating" formControlName="rating"/>
      </mat-form-field>
      <mat-form-field appearance="outline" class="w-100" color="accent">
        <mat-label>Characterictics</mat-label>
        <input matInput formControlName="characterictics">
      </mat-form-field>
      <div class="w-100 mt-half mb-half center flex-column">
        <div class="w-100 mb">
          <button mat-stroked-button (click)="file.click()" color="accent" class="w-100">Upload an image</button>
          <input formControlName="image" type="file" #file hidden name="image" (change)="uploadImage(file.files[0])"/>
        </div>
        <div class="w-100 mb center" hidden id="image">
          <img src="" alt="..." class="add-product__img"/>
        </div>
      </div>
      <div class="mt w-100" *ngIf="formGroup.invalid && formGroup.touched">
        <button class="w-100" mat-button color="warn">
          Please, check the validity of fields
        </button>
      </div>
      <div class="mt w-100" *ngIf="productIsAdded">
        <button class="w-100" mat-stroked-button color="accent" id="visit_btn">
          Click here to visit the product page
        </button>
      </div>
      <div class="w-100 mt mb center">
        <button
          (click)="submit($event)"
          mat-flat-button
          color="accent"
          [disabled]="formGroup.invalid ||formGroup.untouched"
          type="submit">Submit</button>
      </div>
    </form>
  </div>
</div>
